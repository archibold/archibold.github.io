{"version":3,"sources":["webpack:///./src/pages/home.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/firebase/firebase.js","webpack:///./src/firebase/auth.js","webpack:///./src/firebase/db.js","webpack:///./src/components/Session/AuthUserContext.js","webpack:///./src/constants/routes.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/SignOut/index.js","webpack:///./src/components/Navigation/index.js","webpack:///./src/components/layout.js","webpack:///./src/components/Session/withAuthentication.js","webpack:///./gatsby-config.js","webpack:///./src/components/Session/withAuthorization.js","webpack:///./node_modules/core-js/modules/es6.function.name.js"],"names":["HomePage","props","_this","_Component","call","this","state","lists","listName","errorMessage","componentDidMount","_this2","window","_firebase__WEBPACK_IMPORTED_MODULE_5__","c","auth","onAuthStateChanged","authUser","b","readLists","then","snapshot","setState","render","_this3","_this$state","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","_components_layout__WEBPACK_IMPORTED_MODULE_6__","HomePageContent","onListNameChange","e","target","value","onCreateList","createNewList","uid","location","href","_gatsby_config__WEBPACK_IMPORTED_MODULE_9___default","pathPrefix","react__WEBPACK_IMPORTED_MODULE_3__","Component","Object","_components_Session_withAuthorization__WEBPACK_IMPORTED_MODULE_4__","_ref","length","map","element","index","isDraw","key","gatsby__WEBPACK_IMPORTED_MODULE_7__","Link","to","_constants_routes__WEBPACK_IMPORTED_MODULE_8__","d","name","placeholder","defaultValue","onChange","onClick","disabled","__webpack_exports__","default","h","151","t","n","r","p","m","u","i","s","o","withPrefix","navigate","push","replace","navigateTo","l","f","StaticQueryContext","react__WEBPACK_IMPORTED_MODULE_0___default","createContext","StaticQuery","Consumer","staticQueryData","data","query","children","graphql","Error","propTypes","prop_types__WEBPACK_IMPORTED_MODULE_1___default","object","string","isRequired","func","db","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","index_cjs_default","apps","initializeApp","database","auth_doCreateUserWithEmailAndPassword","email","password","createUserWithEmailAndPassword","auth_doSignInWithEmailAndPassword","signInWithEmailAndPassword","auth_doSignOut","signOut","auth_doPasswordReset","sendPasswordResetEmail","auth_doPasswordUpdate","currentUser","updatePassword","auth_getUserId","db_doCreateUser","id","username","ref","set","db_onceGetUsers","once","db_createNewList","S4","Math","random","toString","substring","userId","userName","displayName","listOfPromises","userList","Promise","all","fromObjectToList","keys","assign","db_readLists","val","forEach","list","db_readList","topush","newList","db_joinList","listId","console","log","db_changeListName","newName","updates","update","db_deleteUserFromList","userIndex","remove","db_draw","user","listToDraw","filter","userTofilter","isPicked","item","floor","it","userDraw","myDraw","AuthUserContext","154","LANDING","SIGN_UP","SIGN_IN","PASSWORD_FORGET","HOME","ACCOUNT","LIST","155","module","exports","__webpack_require__","ProdPageRenderer","pageResources","_loader__WEBPACK_IMPORTED_MODULE_3__","getResourcesForPathname","pathname","_page_renderer__WEBPACK_IMPORTED_MODULE_2__","shape","158","SignOut","react_default","type","firebase","doSignOut","Navigation_NavigationAuth","gatsby_browser_entry","routes","Navigation_NavigationNonAuth","components_Navigation","v","g","_React$Component","WithAuthentication","inheritsLoose_default","_proto","prototype","Provider","Session_withAuthentication","Helmet_default","titleTemplate","site","siteMetadata","title","defaultTitle","className","_3470870683","plugins","169","condition","WithAuthorization","apply","arguments","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default","_firebase__WEBPACK_IMPORTED_MODULE_4__","gatsby__WEBPACK_IMPORTED_MODULE_2__","_gatsby_config__WEBPACK_IMPORTED_MODULE_6___default","_constants_routes__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_1___default","_Session_AuthUserContext__WEBPACK_IMPORTED_MODULE_3__","dP","FProto","Function","nameRE","configurable","get","match"],"mappings":"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","file":"component---src-pages-home-js-e0a61c73ce464f9f7e86.js","sourcesContent":["import React, { Component } from 'react';\n\nimport withAuthorization from '../components/Session/withAuthorization';\nimport { firebase, db } from '../firebase';\nimport Layout from '../components/layout';\nimport { Link } from 'gatsby';\nimport * as routes from '../constants/routes';\nimport configFile from '../../gatsby-config';\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      lists: [],\n      listName: '',\n      errorMessage: '',\n    };\n  }\n\n  //firebase.auth.onAuthStateChanged move to layout\n  componentDidMount() {\n    if (typeof window !== 'undefined') {\n      firebase.auth.onAuthStateChanged(authUser => {\n        if (authUser) {\n          db.readLists().then(snapshot => {\n            this.setState(() => ({ lists: snapshot }))\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    const onListNameChange = (e) => {\n        this.setState({\n          listName: e.target.value,\n          errorMessage: '',\n        });\n    }\n\n    const onCreateList = () => {\n      const listName = this.state.listName;\n\n      if(listName !== '') {\n        db.createNewList(listName).then(uid => {\n          window.location.href = configFile.pathPrefix + `/list?id=${uid}`;\n        })\n      } else {\n        this.setState({errorMessage: 'list name cannot be empty'})\n      }\n    }\n\n    const { lists, listName, errorMessage } = this.state;\n\n    return (\n      <Layout>\n        <HomePageContent\n          lists={lists}\n          listName={listName}\n          onListNameChange={onListNameChange}\n          onCreateList={onCreateList}\n          errorMessage={errorMessage}\n        />\n      </Layout>\n    );\n  }\n}\n\nconst authCondition = authUser => !!authUser;\n\nconst HomePageContent = withAuthorization(authCondition)(({lists, listName, onListNameChange, onCreateList, errorMessage}) => (\n    <div>\n      {lists.length !== 0 &&\n        <div>\n          <h2>Finished lists</h2>\n          <ul>\n          {lists.map((element, index)=> (\n            element.isDraw && <li key={index}>\n            <Link to={routes.LIST + `?id=${element.uid}`}>{element.name} </Link>\n            </li>\n          ))}\n          </ul>\n          <h2>Unfinished lists</h2>\n          <ul>\n          {lists.map((element, index)=> (\n            !element.isDraw && <li key={index}>\n            <Link to={routes.LIST + `?id=${element.uid}`}>{element.name} </Link>\n            </li>\n          ))}\n          </ul>\n        </div>}\n      {lists.length === 0  && <div>Nothing here</div>}\n      <div>\n        <input placeholder=\"list name...\" defaultValue={listName} onChange={onListNameChange}/>\n        {errorMessage && <div>{errorMessage}</div>}\n        <button onClick={onCreateList} disabled={errorMessage || listName===''}>Create new list</button>\n      </div>\n    </div>\n));\n\nexport default HomePage;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport { waitForRouteChange } from \"./wait-for-route-change\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  waitForRouteChange,\n}\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\nconst prodConfig = {\n  apiKey: \"AIzaSyAFXFlXKvVIK8EOJ8-c0Hr9pyVf8djOYZU\",\n  authDomain: \"xmasspresent.firebaseapp.com\",\n  databaseURL: \"https://xmasspresent.firebaseio.com\",\n  projectId: \"xmasspresent\",\n  storageBucket: \"xmasspresent.appspot.com\",\n  messagingSenderId: \"111610268866\"\n};\n\nconst devConfig = {\n  apiKey: \"AIzaSyAFXFlXKvVIK8EOJ8-c0Hr9pyVf8djOYZU\",\n  authDomain: \"xmasspresent.firebaseapp.com\",\n  databaseURL: \"https://xmasspresent.firebaseio.com\",\n  projectId: \"xmasspresent\",\n  storageBucket: \"xmasspresent.appspot.com\",\n  messagingSenderId: \"111610268866\"\n};\n\nconst config = process.env.NODE_ENV === 'production' ? prodConfig : devConfig;\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(config);\n}\n\nlet db, auth;\n\nif (typeof window !== 'undefined') {\n  // Gatsby build will fail otherwise\n  db = firebase.database();\n  auth = firebase.auth();\n}\n\nexport { db, auth };\n","import { auth } from './firebase';\n\n// Sign Up\nexport const doCreateUserWithEmailAndPassword = (email, password) =>\n  auth.createUserWithEmailAndPassword(email, password);\n\n// Sign In\nexport const doSignInWithEmailAndPassword = (email, password) =>\n  auth.signInWithEmailAndPassword(email, password);\n\n// Sign out\nexport const doSignOut = () => auth.signOut();\n\n// Password Reset\nexport const doPasswordReset = email => auth.sendPasswordResetEmail(email);\n\n// Password Change\nexport const doPasswordUpdate = password =>\n  auth.currentUser.updatePassword(password);\n\nexport const getUserId = () =>\n  auth.currentUser.uid;\n\n// export const getUser = (id) => {\n//   console.log(auth)\n//   return ''; //auth.getUser(id);\n// }\n","import { db, auth } from './firebase';\n\n// User API\n\nexport const doCreateUser = (id, username, email) =>\n  db.ref(`users/${id}`).set({\n    username,\n    email,\n  });\n\nexport const onceGetUsers = () => db.ref('users').once('value');\n\nexport const createNewList = (name) => {\n  const uid = guidGenerator();\n  const userId = auth.currentUser.uid;\n  const userName = `${auth.currentUser.displayName} (${auth.currentUser.email})`;;\n\n  let listOfPromises = [];\n\n  listOfPromises.push(db.ref('lists/'+ uid).set({\n    name: name,\n    userList: [{\n      userId: userId,\n      userName: userName\n    }]\n  }));\n\n  listOfPromises.push(db.ref(`users/${userId}/lists`).push({uid}));\n\n  return Promise.all(listOfPromises).then(() => uid);\n}\nfunction guidGenerator() {\n    var S4 = function() {\n       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n    };\n    return (S4()+S4()+S4()+S4()+S4()+S4()+S4()+S4());\n}\n\nconst fromObjectToList = object =>\n  object\n    ? Object.keys(object).map(key => ({ ...object[key], index: key }))\n    : [];\n\nexport const readLists = () => {\n  const userId = auth.currentUser.uid;\n  return db.ref(`users/${userId}/lists`).once('value').then(snapshot => {\n    return snapshot.val();\n  }).then((snapshot) => {\n    let listOfPromises = [];\n    fromObjectToList(snapshot).forEach((list) => {\n      listOfPromises.push(readList(list.uid).then((topush) => {\n        topush.uid = list.uid;\n        return topush;\n      }))\n    })\n    return Promise.all(listOfPromises);\n  }).then(snapshot => {\n    return fromObjectToList(snapshot);\n  });\n}\n\nexport const readList = (id) => {\n  return db.ref(`lists/${id}`).once('value').then(snapshot => {\n    const newList = snapshot.val();\n    newList.userList = fromObjectToList(snapshot.val().userList);\n    return newList;\n  });\n}\n\nexport const joinList = (listId) => {\n  const userId = auth.currentUser.uid;\n  console.log();\n  const userName = `${auth.currentUser.displayName} (${auth.currentUser.email})`;\n\n  const newList = db.ref('lists/'+ listId + '/userList').push({\n    userId: userId,\n    userName: userName\n  });\n\n  db.ref(`users/${userId}/lists`).push({\n    uid: listId\n  });\n\n  return newList;\n}\n\n\nexport const changeListName = (id, newName) => {\n  var updates = {};\n  updates[`lists/${id}/name`] = newName;\n  return db.ref().update(updates);\n}\n\nexport const deleteUserFromList = (listId, userId, userIndex) => {\n  db.ref(`users/${userId}/lists`).once('value').then(snapshot => {\n    fromObjectToList(snapshot.val()).forEach((list) => {\n      if(list.uid === listId) {\n        db.ref(`users/${userId}/lists/${list.index}`).remove();\n      }\n    })\n  });\n  return db.ref(`lists/${listId}/userList/${userIndex}`).remove();\n}\n\nexport const draw = (listId) => {\n  // const currentUserId = auth.currentUser.uid;\n  return db.ref(`lists/${listId}`).once('value').then(snapshot => {\n    const userList = fromObjectToList(snapshot.val().userList);\n    var updates = {};\n    // console.log(userList)\n    //delete current user from lists\n    userList.forEach((user, index) => {\n      const listToDraw = userList.filter((userTofilter)=>{\n        //filter current user\n        return (userTofilter.index !== user.index) &&\n        //or is already picked\n        (!userTofilter.isPicked)\n      })\n\n      let item = Math.floor(Math.random()*listToDraw.length);\n\n      //one before the last one BUGFIX\n      if(listToDraw.length === 2 && index === userList.length -2) {\n        item = listToDraw.length - 1;\n      }\n\n      userList.forEach((it) => {\n        if(it.index === listToDraw[item].index) {\n          it.isPicked = true;\n        }\n      })\n\n      user.userDraw = listToDraw[item].userName\n\n      if(auth.currentUser.uid === user.userId) {\n        userList.myDraw = listToDraw[item].userName;\n      }\n\n      updates[`lists/${listId}/userList/${user.index}/userDraw`] = listToDraw[item].userName;\n      updates[`lists/${listId}/userList/${listToDraw[item].index}/isPicked`] = true;\n\n    })\n\n    updates[`lists/${listId}/isDraw/`] = true;\n    userList.isDraw = true;\n    return db.ref().update(updates);\n  });\n}\n","import React from 'react';\n\nconst AuthUserContext = React.createContext(null);\n\nexport default AuthUserContext;\n","export const LANDING = '/';\nexport const SIGN_UP = '/signup';\nexport const SIGN_IN = '/signin';\nexport const PASSWORD_FORGET = '/pw-forget';\nexport const HOME = '/home';\nexport const ACCOUNT = '/account';\nexport const LIST = '/list';\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathname(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react';\n\nimport { auth } from '../../firebase';\n\nconst SignOutButton = () => (\n  <button type=\"button\" onClick={auth.doSignOut}>\n    Sign Out\n  </button>\n);\n\nexport default SignOutButton;\n","import React from 'react';\nimport { Link } from 'gatsby';\n\nimport AuthUserContext from '../Session/AuthUserContext';\nimport SignOutButton from '../SignOut';\nimport * as routes from '../../constants/routes';\n\nconst Navigation = () => (\n  <AuthUserContext.Consumer>\n    {authUser => (authUser ? <NavigationAuth /> : <NavigationNonAuth />)}\n  </AuthUserContext.Consumer>\n);\n\nconst NavigationAuth = () => (\n  <ul>\n    <li>\n      <Link to={routes.LANDING}>Landing</Link>\n    </li>\n    <li>\n      <Link to={routes.HOME}>Home</Link>\n    </li>\n    <li>\n      <Link to={routes.ACCOUNT}>Account</Link>\n    </li>\n    <li>\n      <SignOutButton />\n    </li>\n  </ul>\n);\n\nconst NavigationNonAuth = () => (\n  <ul>\n    <li>\n      <Link to={routes.LANDING}>Landing</Link>\n    </li>\n    <li>\n      <Link to={routes.SIGN_IN}>Sign In</Link>\n    </li>\n  </ul>\n);\n\nexport default Navigation;\n","import React from 'react';\nimport Helmet from 'react-helmet';\nimport { StaticQuery, graphql } from 'gatsby';\n\nimport Navigation from './Navigation';\nimport withAuthentication from './Session/withAuthentication';\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query LayoutQuery {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `}\n    render={data => (\n      <div>\n        <Helmet\n          titleTemplate={`%s | ${data.site.siteMetadata.title}`}\n          defaultTitle={data.site.siteMetadata.title}\n        />\n        <div className=\"app\">\n          <Navigation />\n          <hr />\n          {children}\n        </div>\n      </div>\n    )}\n  />\n);\n\nexport default withAuthentication(Layout);\n","import React from 'react';\n\nimport AuthUserContext from './AuthUserContext';\nimport { firebase } from '../../firebase';\n\nconst withAuthentication = Component =>\n  class WithAuthentication extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        authUser: null,\n      };\n    }\n\n    componentDidMount() {\n      if (typeof window !== 'undefined') {\n        firebase.auth.onAuthStateChanged(authUser => {\n          authUser\n            ? this.setState(() => ({ authUser }))\n            : this.setState(() => ({ authUser: null }));\n        });\n      }\n    }\n\n    render() {\n      const { authUser } = this.state;\n\n      return (\n        <AuthUserContext.Provider value={authUser}>\n          <Component {...this.props} />\n        </AuthUserContext.Provider>\n      );\n    }\n  };\n\nexport default withAuthentication;\n","module.exports = {\n  pathPrefix: '/xmass',\n  siteMetadata: {\n    title: `Gatsby Firebase Authentication`,\n  },\n  plugins: [`gatsby-plugin-react-helmet`],\n}\n","import React from 'react';\nimport { navigate } from \"gatsby\";\n\nimport AuthUserContext from '../Session/AuthUserContext';\nimport { firebase } from '../../firebase';\nimport * as routes from '../../constants/routes';\nimport configFile from '../../../gatsby-config';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      if (typeof window !== 'undefined') {\n        firebase.auth.onAuthStateChanged(authUser => {\n          if (!condition(authUser)) {\n            navigate(configFile.pathPrefix + routes.SIGN_IN);\n          }\n        });\n      }\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser => (authUser ? <Component {...this.props} /> : null)}\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return WithAuthorization;\n};\n\nexport default withAuthorization;\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}