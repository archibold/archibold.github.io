{"version":3,"sources":["webpack:///./src/pages/home.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/firebase/firebase.js","webpack:///./src/firebase/auth.js","webpack:///./src/firebase/db.js","webpack:///./src/components/Session/AuthUserContext.js","webpack:///./src/constants/routes.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/SignOut/index.js","webpack:///./src/components/Navigation/index.js","webpack:///./src/components/layout.js","webpack:///./src/components/Session/withAuthentication.js","webpack:///./src/components/Session/withAuthorization.js","webpack:///./node_modules/core-js/modules/es6.function.name.js"],"names":["HomePage","props","_this","_Component","call","this","state","lists","listName","errorMessage","componentDidMount","_this2","window","_firebase__WEBPACK_IMPORTED_MODULE_5__","c","auth","onAuthStateChanged","authUser","b","readLists","then","snapshot","setState","render","_this3","_this$state","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","_components_layout__WEBPACK_IMPORTED_MODULE_6__","HomePageContent","onListNameChange","e","target","value","onCreateList","createNewList","uid","location","href","react__WEBPACK_IMPORTED_MODULE_3__","Component","Object","_components_Session_withAuthorization__WEBPACK_IMPORTED_MODULE_4__","_ref","length","map","element","index","isDraw","key","gatsby__WEBPACK_IMPORTED_MODULE_7__","Link","to","_constants_routes__WEBPACK_IMPORTED_MODULE_8__","d","name","placeholder","defaultValue","onChange","onClick","disabled","__webpack_exports__","default","f","151","t","n","r","p","m","h","u","i","s","o","withPrefix","navigate","push","replace","navigateTo","l","StaticQueryContext","react__WEBPACK_IMPORTED_MODULE_0___default","createContext","StaticQuery","Consumer","staticQueryData","data","query","children","graphql","Error","propTypes","prop_types__WEBPACK_IMPORTED_MODULE_1___default","object","string","isRequired","func","db","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","index_cjs_default","apps","initializeApp","database","auth_doCreateUserWithEmailAndPassword","email","password","createUserWithEmailAndPassword","auth_doSignInWithEmailAndPassword","signInWithEmailAndPassword","auth_doSignOut","signOut","auth_doPasswordReset","sendPasswordResetEmail","auth_doPasswordUpdate","currentUser","updatePassword","auth_getUserId","db_doCreateUser","id","username","ref","set","db_onceGetUsers","once","db_createNewList","S4","Math","random","toString","substring","userId","userName","displayName","listOfPromises","userList","Promise","all","fromObjectToList","keys","assign","db_readLists","val","forEach","list","db_readList","topush","newList","db_joinList","listId","console","log","db_changeListName","newName","updates","update","db_deleteUserFromList","userIndex","remove","db_draw","user","listToDraw","filter","userTofilter","isPicked","item","floor","it","userDraw","myDraw","AuthUserContext","154","LANDING","SIGN_UP","SIGN_IN","PASSWORD_FORGET","HOME","ACCOUNT","LIST","155","module","exports","__webpack_require__","ProdPageRenderer","pageResources","_loader__WEBPACK_IMPORTED_MODULE_3__","getResourcesForPathname","pathname","_page_renderer__WEBPACK_IMPORTED_MODULE_2__","shape","158","SignOut","react_default","type","firebase","doSignOut","Navigation_NavigationAuth","gatsby_browser_entry","routes","Navigation_NavigationNonAuth","components_Navigation","v","g","_React$Component","WithAuthentication","inheritsLoose_default","_proto","prototype","Provider","Session_withAuthentication","Helmet_default","titleTemplate","site","siteMetadata","title","defaultTitle","className","_3470870683","condition","WithAuthorization","apply","arguments","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default","_firebase__WEBPACK_IMPORTED_MODULE_4__","gatsby__WEBPACK_IMPORTED_MODULE_2__","_constants_routes__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_1___default","_Session_AuthUserContext__WEBPACK_IMPORTED_MODULE_3__","dP","FProto","Function","nameRE","configurable","get","match"],"mappings":"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","file":"component---src-pages-home-js-57c57cf44ca41829926f.js","sourcesContent":["import React, { Component } from 'react';\n\nimport withAuthorization from '../components/Session/withAuthorization';\nimport { firebase, db } from '../firebase';\nimport Layout from '../components/layout';\nimport { Link } from 'gatsby';\nimport * as routes from '../constants/routes';\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      lists: [],\n      listName: '',\n      errorMessage: '',\n    };\n  }\n\n  //firebase.auth.onAuthStateChanged move to layout\n  componentDidMount() {\n    if (typeof window !== 'undefined') {\n      firebase.auth.onAuthStateChanged(authUser => {\n        if (authUser) {\n          db.readLists().then(snapshot => {\n            this.setState(() => ({ lists: snapshot }))\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    const onListNameChange = (e) => {\n        this.setState({\n          listName: e.target.value,\n          errorMessage: '',\n        });\n    }\n\n    const onCreateList = () => {\n      const listName = this.state.listName;\n\n      if(listName !== '') {\n        db.createNewList(listName).then(uid => {\n          window.location.href = `list?id=${uid}`;\n        })\n      } else {\n        this.setState({errorMessage: 'list name cannot be empty'})\n      }\n    }\n\n    const { lists, listName, errorMessage } = this.state;\n\n    return (\n      <Layout>\n        <HomePageContent\n          lists={lists}\n          listName={listName}\n          onListNameChange={onListNameChange}\n          onCreateList={onCreateList}\n          errorMessage={errorMessage}\n        />\n      </Layout>\n    );\n  }\n}\n\nconst authCondition = authUser => !!authUser;\n\nconst HomePageContent = withAuthorization(authCondition)(({lists, listName, onListNameChange, onCreateList, errorMessage}) => (\n    <div>\n      {lists.length !== 0 &&\n        <div>\n          <h2>Finished lists</h2>\n          <ul>\n          {lists.map((element, index)=> (\n            element.isDraw && <li key={index}>\n            <Link to={routes.LIST + `?id=${element.uid}`}>{element.name} </Link>\n            </li>\n          ))}\n          </ul>\n          <h2>Unfinished lists</h2>\n          <ul>\n          {lists.map((element, index)=> (\n            !element.isDraw && <li key={index}>\n            <Link to={routes.LIST + `?id=${element.uid}`}>{element.name} </Link>\n            </li>\n          ))}\n          </ul>\n        </div>}\n      {lists.length === 0  && <div>Nothing here</div>}\n      <div>\n        <input placeholder=\"list name...\" defaultValue={listName} onChange={onListNameChange}/>\n        {errorMessage && <div>{errorMessage}</div>}\n        <button onClick={onCreateList} disabled={errorMessage || listName===''}>Create new list</button>\n      </div>\n    </div>\n));\n\nexport default HomePage;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport { waitForRouteChange } from \"./wait-for-route-change\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  waitForRouteChange,\n}\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\nconst prodConfig = {\n  apiKey: \"AIzaSyAFXFlXKvVIK8EOJ8-c0Hr9pyVf8djOYZU\",\n  authDomain: \"xmasspresent.firebaseapp.com\",\n  databaseURL: \"https://xmasspresent.firebaseio.com\",\n  projectId: \"xmasspresent\",\n  storageBucket: \"xmasspresent.appspot.com\",\n  messagingSenderId: \"111610268866\"\n};\n\nconst devConfig = {\n  apiKey: \"AIzaSyAFXFlXKvVIK8EOJ8-c0Hr9pyVf8djOYZU\",\n  authDomain: \"xmasspresent.firebaseapp.com\",\n  databaseURL: \"https://xmasspresent.firebaseio.com\",\n  projectId: \"xmasspresent\",\n  storageBucket: \"xmasspresent.appspot.com\",\n  messagingSenderId: \"111610268866\"\n};\n\nconst config = process.env.NODE_ENV === 'production' ? prodConfig : devConfig;\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(config);\n}\n\nlet db, auth;\n\nif (typeof window !== 'undefined') {\n  // Gatsby build will fail otherwise\n  db = firebase.database();\n  auth = firebase.auth();\n}\n\nexport { db, auth };\n","import { auth } from './firebase';\n\n// Sign Up\nexport const doCreateUserWithEmailAndPassword = (email, password) =>\n  auth.createUserWithEmailAndPassword(email, password);\n\n// Sign In\nexport const doSignInWithEmailAndPassword = (email, password) =>\n  auth.signInWithEmailAndPassword(email, password);\n\n// Sign out\nexport const doSignOut = () => auth.signOut();\n\n// Password Reset\nexport const doPasswordReset = email => auth.sendPasswordResetEmail(email);\n\n// Password Change\nexport const doPasswordUpdate = password =>\n  auth.currentUser.updatePassword(password);\n\nexport const getUserId = () =>\n  auth.currentUser.uid;\n\n// export const getUser = (id) => {\n//   console.log(auth)\n//   return ''; //auth.getUser(id);\n// }\n","import { db, auth } from './firebase';\n\n// User API\n\nexport const doCreateUser = (id, username, email) =>\n  db.ref(`users/${id}`).set({\n    username,\n    email,\n  });\n\nexport const onceGetUsers = () => db.ref('users').once('value');\n\nexport const createNewList = (name) => {\n  const uid = guidGenerator();\n  const userId = auth.currentUser.uid;\n  const userName = `${auth.currentUser.displayName} (${auth.currentUser.email})`;;\n\n  let listOfPromises = [];\n\n  listOfPromises.push(db.ref('lists/'+ uid).set({\n    name: name,\n    userList: [{\n      userId: userId,\n      userName: userName\n    }]\n  }));\n\n  listOfPromises.push(db.ref(`users/${userId}/lists`).push({uid}));\n\n  return Promise.all(listOfPromises).then(() => uid);\n}\nfunction guidGenerator() {\n    var S4 = function() {\n       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n    };\n    return (S4()+S4()+S4()+S4()+S4()+S4()+S4()+S4());\n}\n\nconst fromObjectToList = object =>\n  object\n    ? Object.keys(object).map(key => ({ ...object[key], index: key }))\n    : [];\n\nexport const readLists = () => {\n  const userId = auth.currentUser.uid;\n  return db.ref(`users/${userId}/lists`).once('value').then(snapshot => {\n    return snapshot.val();\n  }).then((snapshot) => {\n    let listOfPromises = [];\n    fromObjectToList(snapshot).forEach((list) => {\n      listOfPromises.push(readList(list.uid).then((topush) => {\n        topush.uid = list.uid;\n        return topush;\n      }))\n    })\n    return Promise.all(listOfPromises);\n  }).then(snapshot => {\n    return fromObjectToList(snapshot);\n  });\n}\n\nexport const readList = (id) => {\n  return db.ref(`lists/${id}`).once('value').then(snapshot => {\n    const newList = snapshot.val();\n    newList.userList = fromObjectToList(snapshot.val().userList);\n    return newList;\n  });\n}\n\nexport const joinList = (listId) => {\n  const userId = auth.currentUser.uid;\n  console.log();\n  const userName = `${auth.currentUser.displayName} (${auth.currentUser.email})`;\n\n  const newList = db.ref('lists/'+ listId + '/userList').push({\n    userId: userId,\n    userName: userName\n  });\n\n  db.ref(`users/${userId}/lists`).push({\n    uid: listId\n  });\n\n  return newList;\n}\n\n\nexport const changeListName = (id, newName) => {\n  var updates = {};\n  updates[`lists/${id}/name`] = newName;\n  return db.ref().update(updates);\n}\n\nexport const deleteUserFromList = (listId, userId, userIndex) => {\n  db.ref(`users/${userId}/lists`).once('value').then(snapshot => {\n    fromObjectToList(snapshot.val()).forEach((list) => {\n      if(list.uid === listId) {\n        db.ref(`users/${userId}/lists/${list.index}`).remove();\n      }\n    })\n  });\n  return db.ref(`lists/${listId}/userList/${userIndex}`).remove();\n}\n\nexport const draw = (listId) => {\n  // const currentUserId = auth.currentUser.uid;\n  return db.ref(`lists/${listId}`).once('value').then(snapshot => {\n    const userList = fromObjectToList(snapshot.val().userList);\n    var updates = {};\n    // console.log(userList)\n    //delete current user from lists\n    userList.forEach((user, index) => {\n      const listToDraw = userList.filter((userTofilter)=>{\n        //filter current user\n        return (userTofilter.index !== user.index) &&\n        //or is already picked\n        (!userTofilter.isPicked)\n      })\n\n      let item = Math.floor(Math.random()*listToDraw.length);\n\n      //one before the last one BUGFIX\n      if(listToDraw.length === 2 && index === userList.length -2) {\n        item = listToDraw.length - 1;\n      }\n\n      userList.forEach((it) => {\n        if(it.index === listToDraw[item].index) {\n          it.isPicked = true;\n        }\n      })\n\n      user.userDraw = listToDraw[item].userName\n\n      if(auth.currentUser.uid === user.userId) {\n        userList.myDraw = listToDraw[item].userName;\n      }\n\n      updates[`lists/${listId}/userList/${user.index}/userDraw`] = listToDraw[item].userName;\n      updates[`lists/${listId}/userList/${listToDraw[item].index}/isPicked`] = true;\n\n    })\n\n    updates[`lists/${listId}/isDraw/`] = true;\n    userList.isDraw = true;\n    return db.ref().update(updates);\n  });\n}\n","import React from 'react';\n\nconst AuthUserContext = React.createContext(null);\n\nexport default AuthUserContext;\n","export const LANDING = '/';\nexport const SIGN_UP = 'signup';\nexport const SIGN_IN = 'signin';\nexport const PASSWORD_FORGET = 'pw-forget';\nexport const HOME = 'home';\nexport const ACCOUNT = 'account';\nexport const LIST = 'list';\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathname(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react';\n\nimport { auth } from '../../firebase';\n\nconst SignOutButton = () => (\n  <button type=\"button\" onClick={auth.doSignOut}>\n    Sign Out\n  </button>\n);\n\nexport default SignOutButton;\n","import React from 'react';\nimport { Link } from 'gatsby';\n\nimport AuthUserContext from '../Session/AuthUserContext';\nimport SignOutButton from '../SignOut';\nimport * as routes from '../../constants/routes';\n\nconst Navigation = () => (\n  <AuthUserContext.Consumer>\n    {authUser => (authUser ? <NavigationAuth /> : <NavigationNonAuth />)}\n  </AuthUserContext.Consumer>\n);\n\nconst NavigationAuth = () => (\n  <ul>\n    <li>\n      <Link to={routes.LANDING}>Landing</Link>\n    </li>\n    <li>\n      <Link to={routes.HOME}>Home</Link>\n    </li>\n    <li>\n      <Link to={routes.ACCOUNT}>Account</Link>\n    </li>\n    <li>\n      <SignOutButton />\n    </li>\n  </ul>\n);\n\nconst NavigationNonAuth = () => (\n  <ul>\n    <li>\n      <Link to={routes.LANDING}>Landing</Link>\n    </li>\n    <li>\n      <Link to={routes.SIGN_IN}>Sign In</Link>\n    </li>\n  </ul>\n);\n\nexport default Navigation;\n","import React from 'react';\nimport Helmet from 'react-helmet';\nimport { StaticQuery, graphql } from 'gatsby';\n\nimport Navigation from './Navigation';\nimport withAuthentication from './Session/withAuthentication';\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query LayoutQuery {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `}\n    render={data => (\n      <div>\n        <Helmet\n          titleTemplate={`%s | ${data.site.siteMetadata.title}`}\n          defaultTitle={data.site.siteMetadata.title}\n        />\n        <div className=\"app\">\n          <Navigation />\n          <hr />\n          {children}\n        </div>\n      </div>\n    )}\n  />\n);\n\nexport default withAuthentication(Layout);\n","import React from 'react';\n\nimport AuthUserContext from './AuthUserContext';\nimport { firebase } from '../../firebase';\n\nconst withAuthentication = Component =>\n  class WithAuthentication extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        authUser: null,\n      };\n    }\n\n    componentDidMount() {\n      if (typeof window !== 'undefined') {\n        firebase.auth.onAuthStateChanged(authUser => {\n          authUser\n            ? this.setState(() => ({ authUser }))\n            : this.setState(() => ({ authUser: null }));\n        });\n      }\n    }\n\n    render() {\n      const { authUser } = this.state;\n\n      return (\n        <AuthUserContext.Provider value={authUser}>\n          <Component {...this.props} />\n        </AuthUserContext.Provider>\n      );\n    }\n  };\n\nexport default withAuthentication;\n","import React from 'react';\nimport { navigate } from \"gatsby\";\n\nimport AuthUserContext from '../Session/AuthUserContext';\nimport { firebase } from '../../firebase';\nimport * as routes from '../../constants/routes';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      if (typeof window !== 'undefined') {\n        firebase.auth.onAuthStateChanged(authUser => {\n          if (!condition(authUser)) {\n            navigate(routes.SIGN_IN);\n          }\n        });\n      }\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser => (authUser ? <Component {...this.props} /> : null)}\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return WithAuthorization;\n};\n\nexport default withAuthorization;\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}