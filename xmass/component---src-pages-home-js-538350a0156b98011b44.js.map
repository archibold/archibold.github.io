{"version":3,"sources":["webpack:///./src/pages/home.js","webpack:///./src/firebase/firebase.js","webpack:///./src/firebase/auth.js","webpack:///./src/firebase/db.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/components/Session/AuthUserContext.js","webpack:///./src/constants/routes.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/SignOut/index.js","webpack:///./src/components/Navigation/index.js","webpack:///./src/components/layout.js","webpack:///./src/components/Session/withAuthentication.js","webpack:///./gatsby-config.js","webpack:///./src/components/Session/withAuthorization.js","webpack:///./node_modules/core-js/modules/es6.function.name.js"],"names":["HomePage","props","_this","_Component","call","this","state","lists","listName","errorMessage","componentDidMount","_this2","window","_firebase__WEBPACK_IMPORTED_MODULE_5__","c","auth","onAuthStateChanged","authUser","b","readLists","then","snapshot","setState","render","_this3","_this$state","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","_components_layout__WEBPACK_IMPORTED_MODULE_6__","HomePageContent","onListNameChange","e","target","value","onCreateList","createNewList","uid","location","href","_gatsby_config__WEBPACK_IMPORTED_MODULE_9___default","pathPrefix","react__WEBPACK_IMPORTED_MODULE_3__","Component","Object","_components_Session_withAuthorization__WEBPACK_IMPORTED_MODULE_4__","_ref","length","map","element","index","isDraw","key","gatsby__WEBPACK_IMPORTED_MODULE_7__","Link","to","_constants_routes__WEBPACK_IMPORTED_MODULE_8__","d","name","placeholder","defaultValue","onChange","onClick","disabled","__webpack_exports__","default","h","151","t","n","r","i","s","f","m","p","v","u","g","E","w","L","U","x","C","k","db","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","index_cjs_default","apps","initializeApp","database","auth_doCreateUserWithEmailAndPassword","email","password","createUserWithEmailAndPassword","auth_doSignInWithEmailAndPassword","signInWithEmailAndPassword","auth_doSignOut","signOut","auth_doPasswordReset","sendPasswordResetEmail","auth_doPasswordUpdate","currentUser","updatePassword","auth_getUserId","db_doCreateUser","id","username","ref","set","db_onceGetUsers","once","db_createNewList","S4","Math","random","toString","substring","userId","userName","displayName","listOfPromises","push","userList","Promise","all","fromObjectToList","object","keys","assign","db_readLists","val","forEach","list","db_readList","topush","newList","db_joinList","listId","console","log","db_changeListName","newName","updates","update","db_deleteUserFromList","userIndex","remove","db_draw","user","listToDraw","filter","userTofilter","isPicked","item","floor","it","userDraw","myDraw","StaticQueryContext","react__WEBPACK_IMPORTED_MODULE_0___default","createContext","StaticQuery","Consumer","staticQueryData","data","query","children","graphql","Error","propTypes","prop_types__WEBPACK_IMPORTED_MODULE_1___default","string","isRequired","func","AuthUserContext","154","o","LANDING","SIGN_UP","SIGN_IN","PASSWORD_FORGET","HOME","ACCOUNT","LIST","155","module","exports","__webpack_require__","ProdPageRenderer","pageResources","_loader__WEBPACK_IMPORTED_MODULE_3__","getResourcesForPathname","pathname","_page_renderer__WEBPACK_IMPORTED_MODULE_2__","shape","158","l","SignOut","react_default","type","firebase","doSignOut","Navigation_NavigationAuth","gatsby_browser_entry","routes","Navigation_NavigationNonAuth","components_Navigation","_React$Component","WithAuthentication","inheritsLoose_default","_proto","prototype","Provider","Session_withAuthentication","Helmet_default","titleTemplate","site","siteMetadata","title","defaultTitle","className","_3470870683","plugins","169","condition","WithAuthorization","apply","arguments","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default","_firebase__WEBPACK_IMPORTED_MODULE_4__","gatsby__WEBPACK_IMPORTED_MODULE_2__","navigate","_constants_routes__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_1___default","_Session_AuthUserContext__WEBPACK_IMPORTED_MODULE_3__","dP","FProto","Function","nameRE","configurable","get","match"],"mappings":"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","file":"component---src-pages-home-js-538350a0156b98011b44.js","sourcesContent":["import React, { Component } from 'react';\n\nimport withAuthorization from '../components/Session/withAuthorization';\nimport { firebase, db } from '../firebase';\nimport Layout from '../components/layout';\nimport { Link } from 'gatsby';\nimport * as routes from '../constants/routes';\nimport configFile from '../../gatsby-config';\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      lists: [],\n      listName: '',\n      errorMessage: '',\n    };\n  }\n\n  //firebase.auth.onAuthStateChanged move to layout\n  componentDidMount() {\n    if (typeof window !== 'undefined') {\n      firebase.auth.onAuthStateChanged(authUser => {\n        if (authUser) {\n          db.readLists().then(snapshot => {\n            this.setState(() => ({ lists: snapshot }))\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    const onListNameChange = (e) => {\n        this.setState({\n          listName: e.target.value,\n          errorMessage: '',\n        });\n    }\n\n    const onCreateList = () => {\n      const listName = this.state.listName;\n\n      if(listName !== '') {\n        db.createNewList(listName).then(uid => {\n          window.location.href = configFile.pathPrefix + `/list?id=${uid}`;\n        })\n      } else {\n        this.setState({errorMessage: 'list name cannot be empty'})\n      }\n    }\n\n    const { lists, listName, errorMessage } = this.state;\n\n    return (\n      <Layout>\n        <HomePageContent\n          lists={lists}\n          listName={listName}\n          onListNameChange={onListNameChange}\n          onCreateList={onCreateList}\n          errorMessage={errorMessage}\n        />\n      </Layout>\n    );\n  }\n}\n\nconst authCondition = authUser => !!authUser;\n\nconst HomePageContent = withAuthorization(authCondition)(({lists, listName, onListNameChange, onCreateList, errorMessage}) => (\n    <div>\n      {lists.length !== 0 &&\n        <div>\n          <h2>Finished lists</h2>\n          <ul>\n          {lists.map((element, index)=> (\n            element.isDraw && <li key={index}>\n            <Link to={routes.LIST + `?id=${element.uid}`}>{element.name} </Link>\n            </li>\n          ))}\n          </ul>\n          <h2>Unfinished lists</h2>\n          <ul>\n          {lists.map((element, index)=> (\n            !element.isDraw && <li key={index}>\n            <Link to={routes.LIST + `?id=${element.uid}`}>{element.name} </Link>\n            </li>\n          ))}\n          </ul>\n        </div>}\n      {lists.length === 0  && <div>Nothing here</div>}\n      <div>\n        <input placeholder=\"list name...\" defaultValue={listName} onChange={onListNameChange}/>\n        {errorMessage && <div>{errorMessage}</div>}\n        <button onClick={onCreateList} disabled={errorMessage || listName===''}>Create new list</button>\n      </div>\n    </div>\n));\n\nexport default HomePage;\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\nconst prodConfig = {\n  apiKey: \"AIzaSyAFXFlXKvVIK8EOJ8-c0Hr9pyVf8djOYZU\",\n  authDomain: \"xmasspresent.firebaseapp.com\",\n  databaseURL: \"https://xmasspresent.firebaseio.com\",\n  projectId: \"xmasspresent\",\n  storageBucket: \"xmasspresent.appspot.com\",\n  messagingSenderId: \"111610268866\"\n};\n\nconst devConfig = {\n  apiKey: \"AIzaSyAFXFlXKvVIK8EOJ8-c0Hr9pyVf8djOYZU\",\n  authDomain: \"xmasspresent.firebaseapp.com\",\n  databaseURL: \"https://xmasspresent.firebaseio.com\",\n  projectId: \"xmasspresent\",\n  storageBucket: \"xmasspresent.appspot.com\",\n  messagingSenderId: \"111610268866\"\n};\n\nconst config = process.env.NODE_ENV === 'production' ? prodConfig : devConfig;\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(config);\n}\n\nlet db, auth;\n\nif (typeof window !== 'undefined') {\n  // Gatsby build will fail otherwise\n  db = firebase.database();\n  auth = firebase.auth();\n}\n\nexport { db, auth };\n","import { auth } from './firebase';\n\n// Sign Up\nexport const doCreateUserWithEmailAndPassword = (email, password) =>\n  auth.createUserWithEmailAndPassword(email, password);\n\n// Sign In\nexport const doSignInWithEmailAndPassword = (email, password) =>\n  auth.signInWithEmailAndPassword(email, password);\n\n// Sign out\nexport const doSignOut = () => auth.signOut();\n\n// Password Reset\nexport const doPasswordReset = email => auth.sendPasswordResetEmail(email);\n\n// Password Change\nexport const doPasswordUpdate = password =>\n  auth.currentUser.updatePassword(password);\n\nexport const getUserId = () =>\n  auth.currentUser.uid;\n\n// export const getUser = (id) => {\n//   console.log(auth)\n//   return ''; //auth.getUser(id);\n// }\n","import { db, auth } from './firebase';\n\n// User API\n\nexport const doCreateUser = (id, username, email) =>\n  db.ref(`users/${id}`).set({\n    username,\n    email,\n  });\n\nexport const onceGetUsers = () => db.ref('users').once('value');\n\nexport const createNewList = (name) => {\n  const uid = guidGenerator();\n  const userId = auth.currentUser.uid;\n  const userName = `${auth.currentUser.displayName} (${auth.currentUser.email})`;;\n\n  let listOfPromises = [];\n\n  listOfPromises.push(db.ref('lists/'+ uid).set({\n    name: name,\n    userList: [{\n      userId: userId,\n      userName: userName\n    }]\n  }));\n\n  listOfPromises.push(db.ref(`users/${userId}/lists`).push({uid}));\n\n  return Promise.all(listOfPromises).then(() => uid);\n}\nfunction guidGenerator() {\n    var S4 = function() {\n       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n    };\n    return (S4()+S4()+S4()+S4()+S4()+S4()+S4()+S4());\n}\n\nconst fromObjectToList = object =>\n  object\n    ? Object.keys(object).map(key => ({ ...object[key], index: key }))\n    : [];\n\nexport const readLists = () => {\n  const userId = auth.currentUser.uid;\n  return db.ref(`users/${userId}/lists`).once('value').then(snapshot => {\n    return snapshot.val();\n  }).then((snapshot) => {\n    let listOfPromises = [];\n    fromObjectToList(snapshot).forEach((list) => {\n      listOfPromises.push(readList(list.uid).then((topush) => {\n        topush.uid = list.uid;\n        return topush;\n      }))\n    })\n    return Promise.all(listOfPromises);\n  }).then(snapshot => {\n    return fromObjectToList(snapshot);\n  });\n}\n\nexport const readList = (id) => {\n  return db.ref(`lists/${id}`).once('value').then(snapshot => {\n    const newList = snapshot.val();\n    newList.userList = fromObjectToList(snapshot.val().userList);\n    return newList;\n  });\n}\n\nexport const joinList = (listId) => {\n  const userId = auth.currentUser.uid;\n  console.log();\n  const userName = `${auth.currentUser.displayName} (${auth.currentUser.email})`;\n\n  const newList = db.ref('lists/'+ listId + '/userList').push({\n    userId: userId,\n    userName: userName\n  });\n\n  db.ref(`users/${userId}/lists`).push({\n    uid: listId\n  });\n\n  return newList;\n}\n\n\nexport const changeListName = (id, newName) => {\n  var updates = {};\n  updates[`lists/${id}/name`] = newName;\n  return db.ref().update(updates);\n}\n\nexport const deleteUserFromList = (listId, userId, userIndex) => {\n  db.ref(`users/${userId}/lists`).once('value').then(snapshot => {\n    fromObjectToList(snapshot.val()).forEach((list) => {\n      if(list.uid === listId) {\n        db.ref(`users/${userId}/lists/${list.index}`).remove();\n      }\n    })\n  });\n  return db.ref(`lists/${listId}/userList/${userIndex}`).remove();\n}\n\nexport const draw = (listId) => {\n  // const currentUserId = auth.currentUser.uid;\n  return db.ref(`lists/${listId}`).once('value').then(snapshot => {\n    const userList = fromObjectToList(snapshot.val().userList);\n    var updates = {};\n    // console.log(userList)\n    //delete current user from lists\n    userList.forEach((user, index) => {\n      const listToDraw = userList.filter((userTofilter)=>{\n        //filter current user\n        return (userTofilter.index !== user.index) &&\n        //or is already picked\n        (!userTofilter.isPicked)\n      })\n\n      let item = Math.floor(Math.random()*listToDraw.length);\n\n      //one before the last one BUGFIX\n      if(listToDraw.length === 2 && index === userList.length -2) {\n        item = listToDraw.length - 1;\n      }\n\n      userList.forEach((it) => {\n        if(it.index === listToDraw[item].index) {\n          it.isPicked = true;\n        }\n      })\n\n      user.userDraw = listToDraw[item].userName\n\n      if(auth.currentUser.uid === user.userId) {\n        userList.myDraw = listToDraw[item].userName;\n      }\n\n      updates[`lists/${listId}/userList/${user.index}/userDraw`] = listToDraw[item].userName;\n      updates[`lists/${listId}/userList/${listToDraw[item].index}/isPicked`] = true;\n\n    })\n\n    updates[`lists/${listId}/isDraw/`] = true;\n    userList.isDraw = true;\n    return db.ref().update(updates);\n  });\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport { waitForRouteChange } from \"./wait-for-route-change\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  waitForRouteChange,\n}\n","import React from 'react';\n\nconst AuthUserContext = React.createContext(null);\n\nexport default AuthUserContext;\n","export const LANDING = '/';\nexport const SIGN_UP = '/signup';\nexport const SIGN_IN = '/signin';\nexport const PASSWORD_FORGET = '/pw-forget';\nexport const HOME = '/home';\nexport const ACCOUNT = '/account';\nexport const LIST = '/list';\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathname(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react';\n\nimport { auth } from '../../firebase';\n\nconst SignOutButton = () => (\n  <button type=\"button\" onClick={auth.doSignOut}>\n    Sign Out\n  </button>\n);\n\nexport default SignOutButton;\n","import React from 'react';\nimport { Link } from 'gatsby';\n\nimport AuthUserContext from '../Session/AuthUserContext';\nimport SignOutButton from '../SignOut';\nimport * as routes from '../../constants/routes';\n\nconst Navigation = () => (\n  <AuthUserContext.Consumer>\n    {authUser => (authUser ? <NavigationAuth /> : <NavigationNonAuth />)}\n  </AuthUserContext.Consumer>\n);\n\nconst NavigationAuth = () => (\n  <ul>\n    <li>\n      <Link to={routes.LANDING}>Landing</Link>\n    </li>\n    <li>\n      <Link to={routes.HOME}>Home</Link>\n    </li>\n    <li>\n      <Link to={routes.ACCOUNT}>Account</Link>\n    </li>\n    <li>\n      <SignOutButton />\n    </li>\n  </ul>\n);\n\nconst NavigationNonAuth = () => (\n  <ul>\n    <li>\n      <Link to={routes.LANDING}>Landing</Link>\n    </li>\n    <li>\n      <Link to={routes.SIGN_IN}>Sign In</Link>\n    </li>\n  </ul>\n);\n\nexport default Navigation;\n","import React from 'react';\nimport Helmet from 'react-helmet';\nimport { StaticQuery, graphql } from 'gatsby';\n\nimport Navigation from './Navigation';\nimport withAuthentication from './Session/withAuthentication';\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query LayoutQuery {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `}\n    render={data => (\n      <div>\n        <Helmet\n          titleTemplate={`%s | ${data.site.siteMetadata.title}`}\n          defaultTitle={data.site.siteMetadata.title}\n        />\n        <div className=\"app\">\n          <Navigation />\n          <hr />\n          {children}\n        </div>\n      </div>\n    )}\n  />\n);\n\nexport default withAuthentication(Layout);\n","import React from 'react';\n\nimport AuthUserContext from './AuthUserContext';\nimport { firebase } from '../../firebase';\n\nconst withAuthentication = Component =>\n  class WithAuthentication extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        authUser: null,\n      };\n    }\n\n    componentDidMount() {\n      if (typeof window !== 'undefined') {\n        firebase.auth.onAuthStateChanged(authUser => {\n          authUser\n            ? this.setState(() => ({ authUser }))\n            : this.setState(() => ({ authUser: null }));\n        });\n      }\n    }\n\n    render() {\n      const { authUser } = this.state;\n\n      return (\n        <AuthUserContext.Provider value={authUser}>\n          <Component {...this.props} />\n        </AuthUserContext.Provider>\n      );\n    }\n  };\n\nexport default withAuthentication;\n","module.exports = {\n  pathPrefix: '/xmass',\n  siteMetadata: {\n    title: `Gatsby Firebase Authentication`,\n  },\n  plugins: [`gatsby-plugin-react-helmet`],\n}\n","import React from 'react';\nimport { navigate } from \"gatsby\";\n\nimport AuthUserContext from '../Session/AuthUserContext';\nimport { firebase } from '../../firebase';\nimport * as routes from '../../constants/routes';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      if (typeof window !== 'undefined') {\n        firebase.auth.onAuthStateChanged(authUser => {\n          if (!condition(authUser)) {\n            navigate(routes.SIGN_IN);\n          }\n        });\n      }\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser => (authUser ? <Component {...this.props} /> : null)}\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return WithAuthorization;\n};\n\nexport default withAuthorization;\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}